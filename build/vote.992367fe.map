{"version":3,"sources":["src\\components\\children\\vote.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;kBAeA;AACA,KADA,kBACA;AACA,SAAA;AACA,OAAA,CADA;AAEA,gBAAA,CAFA;AAGA,qBAAA,CAHA;AAIA,eAAA,EAJA;AAKA,SAAA,EALA;AAMA,YAAA;AANA,GAAA;AAQA,EAVA;;AAWA,UAAA;AACA,kBADA,4BACA,gBADA,EACA;AACA,QAAA,gBAAA,GAAA,gBAAA;AACA,GAHA;AAIA,KAJA,eAIA,KAJA,EAIA,IAJA,EAIA;AAAA;;AACA,QAAA,EAAA,GAAA,KAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,MAAA,EAAA,EAAA,IAAA,KAAA,EAAA,EAAA,SAAA,KAAA,QAAA,CAAA,GAAA,CAAA,SAAA,CAAA,EAAA,EAAA,IAAA,CAAA,eAAA;AACA,QAAA,IAAA,IAAA,IAAA,UAAA,IAAA,IAAA,IAAA,IAAA,cAAA,IAAA,IAAA,IAAA,IAAA,MAAA,EAAA;AACA,WAAA,gBAAA,GAAA,MAAA,WAAA,EACA,MAAA,IAAA,GAAA,IAAA,IADA;AAEA,SAAA,IAAA,IAAA,IAAA,MAAA,EAAA,MAAA,OAAA,GAAA,QAAA,CAAA,KACA;AACA,YAAA,OAAA,GAAA,SAAA;AACA,YAAA,UAAA,CAAA,KAAA,EAAA,aAAA;AACA;AACA;AACA,IAVA,EAUA,eAAA,CAAA,CAVA;AAWA;AAjBA,EAXA;AA8BA,QA9BA,qBA8BA;AAAA;;AACA,OAAA,KAAA,CAAA,GAAA,CAAA,OAAA,EAAA;AACA,gBAAA;AADA,GAAA,EAEA,IAFA,CAEA,eAAA;AACA,UAAA,UAAA,GAAA,IAAA,IAAA,EACA,OAAA,SAAA,GAAA;AACA,aAAA,CAAA,IAAA,EAAA,MAAA,EAAA,eAAA,CADA;AAEA,UAAA,OAAA;AAFA,IADA;AAKA,UAAA,aAAA,GAAA;AACA,eAAA,MADA;AAEA,aAAA;AAFA,IAAA;AAIA,GAZA,EAYA,eAAA,CAAA,CAZA;AAaA;AA5CA;AA8CA;;;;;;;;;;;;;;;;;;;;;AAqBA","file":"vote.992367fe.map","sourcesContent":["<template>\r\n\t\t<div id='vote'>\r\n\t\t\t<div class=\"alertContainer\">\r\n\t\t\t\t<b-alert :variant=\"variant\" dismissible :show=\"dismissCountDown\" @dismissed=\"dismissCountdown=0\" @dismiss-count-down=\"countDownChanged\">\r\n\t\t\t\t\t{{info}} 这条消息将在 {{dismissCountDown}} 秒后消失...\r\n\t\t\t\t</b-alert>\r\n\t\t\t</div>\r\n\t\t\t<ve-pie :data=\"chartData\" :settings=\"chartSettings\"></ve-pie>\r\n\t\t\t<ul>\r\n\t\t\t\t<li v-for='(user,key) of classmates' :key='user.id'><font>{{user.name}}-支持率：{{user.approval_rate}}</font><button class=\"form-control\" @click='add(key,user)'>支持</button></li>\r\n\t\t\t\t<h2 v-show=\"classmates==''\">投票系统已关闭或你的设备不支持</h2>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n\tdata () {\r\n\t\treturn {\r\n\t\t\tid: 0,\r\n\t\t\tdismissSecs: 5,\r\n\t\t\tdismissCountDown: 0,\r\n\t\t\tclassmates: [],\r\n\t\t\tinfo: '',\r\n\t\t\tvariant: ''\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tcountDownChanged (dismissCountDown) {\r\n\t\t\tthis.dismissCountDown = dismissCountDown\r\n\t\t},\r\n\t\tadd (index,item) {\r\n\t\t\tthis.id=index\r\n\t\t\tthis.axios.patch('/add', { id: this.id, account: this.$cookies.get('isLogin') }).then(res=>{\r\n\t\t\t\tif (res.data == '与服务器断开连接' || res.data == '您已投票了，请勿重复投票' || res.data == '提交成功') {\r\n\t\t\t\t\tthis.dismissCountDown = this.dismissSecs,\r\n\t\t\t\t\tthis.info = res.data\r\n\t\t\t\t\tif(res.data != '提交成功') this.variant='danger'\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.variant = 'success'\r\n\t\t\t\t\t\tthis.classmates[index].approval_rate++\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},res=>{ })\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.axios.get('/user',{\r\n\t\t\temulateJSON:true\r\n\t\t}).then(res=>{\r\n\t\t\tthis.classmates=res.data,\r\n\t\t\tthis.chartData = {\r\n\t\t\t\tcolumns: ['id', 'name', 'approval_rate'],\r\n\t\t\t\trows: this.classmates\r\n\t\t\t}\r\n\t\t\tthis.chartSettings = {\r\n\t\t\t\tdimension: 'name',\r\n\t\t\t\tmetrics: 'approval_rate'\r\n\t\t\t}\r\n\t\t},res=>{})\r\n\t}\r\n}\r\n/* fetch('https://quiet-mesa-99852.herokuapp.com/add',{\r\n\tmethod:'post',\r\n\tmode: 'cors',\r\n\theaders: {\r\n\t\t'Access-Control-Allow-Origin': '*',\r\n\t\t'Content-Type': 'application/json'\r\n\t}, \r\n\tbody:JSON.stringify({ 'id':this.id, 'account': this.$cookies.get('isLogin') })\r\n})\r\n.then(res=>res.json())\r\n.then(json=>{\r\n\tif (json == '与服务器断开连接' || json == '您已投票了，请勿重复投票' || json == '提交成功') {\r\n\t\tthis.dismissCountDown = this.dismissSecs,\r\n\t\tthis.info = json\r\n\t\tif(json != '提交成功') this.variant='danger'\r\n\t\telse {\r\n\t\t\tthis.variant = 'success'\r\n\t\t\tthis.classmates[index].approval_rate++\r\n\t\t}\r\n\t}\r\n}) */\r\n/* fetch('https://quiet-mesa-99852.herokuapp.com/user',{\r\n\tmethod:'get',\r\n\tmode: 'cors',\r\n\theaders: {\r\n\t\t'Access-Control-Allow-Origin': '*',\r\n\t\t'Content-Type': 'application/json'\r\n\t}\r\n})\r\n.then(res=>res.json())\r\n.then(json=>{\r\n\tthis.classmates=json\r\n}) */\r\n</script>\r\n"]}