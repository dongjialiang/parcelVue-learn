{"version":3,"sources":["src\\components\\children\\signin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;kBAoBA;AACA,QADA,kBACA;AACA,eAAA;AACA,kBAAA,EADA;AAEA,iBAAA,EAFA;AAGA,qBAAA,CAAA,SAAA,EAAA,IAAA,CAHA;AAIA,oBAAA,CAAA,UAAA,EAAA,IAAA,EAAA,QAAA,CAJA;AAKA,yBAAA,CALA;AAMA,8BAAA,CANA;AAOA,qBAAA,EAPA;AAQA,kBAAA;AARA,SAAA;AAUA,KAZA;;AAaA,aAAA;AACA,wBADA,4BACA,gBADA,EACA;AACA,iBAAA,gBAAA,GAAA,gBAAA;AACA,SAHA;AAIA,aAJA,iBAIA,KAJA,EAIA;AACA,gBAAA,MAAA,OAAA,IAAA,EAAA,IAAA,MAAA,OAAA,IAAA,EAAA,EAAA;AACA,gBAAA,CAAA,KAAA,QAAA,IAAA,MAAA,OAAA,IAAA,EAAA,EAAA;AACA,qBAAA,MAAA;AACA;AACA,SATA;AAUA,cAVA,oBAUA;AAAA;;AACA,iBAAA,KAAA,CAAA,IAAA,CAAA,SAAA,EAAA,EAAA,MAAA,KAAA,IAAA,EAAA,KAAA,KAAA,GAAA,EAAA,EAAA,IAAA,CAAA,eAAA;AACA,oBAAA,IAAA,IAAA,CAAA,IAAA,IAAA,MAAA,EAAA;AACA,0BAAA,OAAA,GAAA,QAAA;AACA,0BAAA,gBAAA,GAAA,MAAA,WAAA;AACA,0BAAA,IAAA,GAAA,IAAA,IAAA,CAAA,IAAA;AACA;AACA,oBAAA,IAAA,IAAA,CAAA,IAAA,IAAA,MAAA,EAAA;AACA,0BAAA,QAAA,CAAA,GAAA,CAAA,SAAA,EAAA,yBAAA,IAAA,IAAA,CAAA,IAAA,EAAA,KAAA,EAAA,GAAA,EAAA,GAAA,CAAA;AACA,0BAAA,OAAA,CAAA,IAAA,CAAA,EAAA,MAAA,OAAA,EAAA;AACA;AACA,aAVA,EAUA,eAAA;AACA,sBAAA,OAAA,GAAA,QAAA;AACA,sBAAA,gBAAA,GAAA,MAAA,WAAA;AACA,sBAAA,IAAA,GAAA,QAAA;AACA,aAdA;AAeA;AA1BA,KAbA;AAyCA,cAAA;AACA,iBADA,uBACA;AACA,mBAAA,KAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA,SAHA;AAIA,gBAJA,sBAIA;AACA,mBAAA,6BAAA,IAAA,CAAA,KAAA,GAAA,IAAA,IAAA,GAAA;AAAA;AACA,SANA;AAOA,gBAPA,sBAOA;AACA,mBAAA,KAAA,IAAA,IAAA,4BAAA,IAAA,CAAA,KAAA,GAAA,CAAA,GAAA,KAAA,GAAA,IAAA;AACA;AATA;AAYA;;;;;;;;;;;;;;;;;;;;;;;;;;;AArDA","file":"signin.c3f71f43.map","sourcesContent":["<template>\r\n    <div id=\"signin\">\r\n        <div class=\"alertContainer\">\r\n            <b-alert :variant=\"variant\" dismissible :show=\"dismissCountDown\" @dismissed=\"dismissCountdown=0\" @dismiss-count-down=\"countDownChanged\">\r\n                {{info}} 这条消息将在 {{dismissCountDown}} 秒后消失...\r\n            </b-alert>\r\n        </div>\r\n        <b-form @keyup=\"keyup\">\r\n            <div class=\"input\"><input type=\"text\" class=\"form-control\" v-model=\"name\" :state=\"nameState\" placeholder=\"输入用户名\" /><font v-show=\"name\" @click.stop=\"name=''\"><i class=\"fa fa-times\"></i></font></div>\r\n            <span>{{name?nametip[1]:nametip[0]}}</span>\r\n            <div class=\"input\"><input type=\"password\" class=\"form-control\" v-model=\"pwd\" :state=\"pwdState\" placeholder=\"输入密码\" /><font v-show=\"pwd\" @click.stop=\"pwd=''\"><i class=\"fa fa-times\"></i></font></div>\r\n            <span>{{pwd.length>=6?/^[0-9a-zA-Z!@#$^*]{6,18}$/.test(pwd)?pwdtip[1]:pwdtip[2]:pwdtip[0]}}</span>\r\n        </b-form>\r\n        <p>\r\n            <button class=\"form-control\" :disabled=\"disabled\" @click.stop=\"signin\">登录</button>\r\n            <router-link to='/signup'>注册</router-link>\r\n        </p>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            name: '',\r\n            pwd: '',\r\n            nametip: ['用户名不能为空','ok'],\r\n            pwdtip: ['密码不能少于6位','ok','密码格式不对'],\r\n\t\t\tdismissSecs: 5,\r\n            dismissCountDown: 0,\r\n            variant: '',\r\n            info: ''\r\n        }\r\n    },\r\n    methods: {\r\n        countDownChanged (dismissCountDown) {\r\n\t\t\tthis.dismissCountDown = dismissCountDown\r\n        },\r\n        keyup (event) {\r\n            if(event.keyCode==38||event.keyCode==40) return\r\n\t\t\tif(!this.disabled&&event.keyCode==13){\r\n                this.signin()\r\n            }\r\n        },\r\n        signin() {\r\n            this.axios.post('/signin', { name: this.name,pwd: this.pwd }).then(res=>{\r\n                if(res.data.info != '登录成功') {\r\n                    this.variant = 'danger';\r\n                    this.dismissCountDown = this.dismissSecs;\r\n                    this.info = res.data.info\r\n                }\r\n                if(res.data.info == '登录成功') {\r\n                    this.$cookies.set('isLogin','1245465r654fghfgfwcb'+res.data.user,60*60*24*3)\r\n                    this.$router.push({path:'/vote'})\r\n                }\r\n            },res=>{\r\n                this.variant='danger';\r\n                this.dismissCountDown = this.dismissSecs;\r\n                this.info='服务器已关闭'\r\n            })\r\n        }\r\n    },\r\n    computed: {\r\n        nameState() {\r\n            return this.name?true:null\r\n        },\r\n        pwdState() {\r\n            return /^[0-9a-zA-Z!@#$^*]{6,18}$/.test(this.pwd)?true:null\r\n        },\r\n        disabled() {\r\n            return this.name&&/^[0-9a-zA-Z!@#$^*]{6,18}$/.test(this.pwd)?false:true\r\n        }\r\n    }\r\n}\r\n/* fetch('https://quiet-mesa-99852.herokuapp.com/signin',{\r\n    method:'post',\r\n    mode: 'cors',\r\n    headers: {\r\n        'Access-Control-Allow-Origin': '*',\r\n        'Content-Type': 'application/json'\r\n    }, \r\n    body:JSON.stringify({ 'name': this.name,'pwd': this.pwd })\r\n})\r\n.then(res=>res.json())\r\n.then(json=>{\r\n    if(json.info != '登录成功') {\r\n        this.variant = 'danger';\r\n        this.dismissCountDown = this.dismissSecs;\r\n        this.info = json.info\r\n    }\r\n    if(json.info == '登录成功') {\r\n        this.$cookies.set('isLogin','1245465r654fghfgfwcb'+json.user,60*60*24*3)\r\n        this.$router.push({path:'/vote'})\r\n    }\r\n})\r\n.catch(e => {\r\n    this.variant='danger';\r\n    this.dismissCountDown = this.dismissSecs;\r\n    this.info='服务器已关闭'\r\n}) */\r\n</script>\r\n\r\n"]}